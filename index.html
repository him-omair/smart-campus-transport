<!doctype html>
<html lang="ar" class="h-full" dir="rtl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø°ÙƒÙŠ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@400;700;800&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    * {
      direction: rtl;
    }
    
    body {
      box-sizing: border-box;
      font-family: 'Almarai', sans-serif;
    }
    
    ::-webkit-scrollbar {
      width: 4px;
    }
    ::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.1);
    }
    ::-webkit-scrollbar-thumb {
      background: #10b981;
      border-radius: 4px;
    }
    
    .leaflet-container {
      background: #1a1a2e;
    }
    
    @keyframes pulse-ring {
      0% { transform: scale(0.8); opacity: 1; }
      100% { transform: scale(2); opacity: 0; }
    }
    
    .pulse-marker {
      animation: pulse-ring 2s ease-out infinite;
    }
    
    .glow-blue {
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
    }
    
    .gradient-dark {
      background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
    }
    
    .gradient-card {
      background: linear-gradient(145deg, rgba(30,41,59,0.9) 0%, rgba(15,23,42,0.95) 100%);
      backdrop-filter: blur(10px);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
    }
    
    .btn-amber {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      transition: all 0.3s ease;
    }
    
    .btn-amber:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .floating {
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .status-live {
      animation: blink 1.5s ease-in-out infinite;
    }
    
    .custom-marker {
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    
    .student-marker {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    }
    
    .bus-marker {
      background: linear-gradient(135deg, #10b981, #059669);
    }
    
    .car-marker {
      background: linear-gradient(135deg, #f59e0b, #d97706);
    }
    
    .view-hidden {
      display: none !important;
    }
    
    @keyframes slideUp {
      from { transform: translateY(100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .slide-up {
      animation: slideUp 0.4s ease-out forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }
    
    /* Bottom panel styling */
    .bottom-panel {
      height: 40%;
      overflow-y: auto;
    }
    
    /* RTL adjustments for leaflet */
    .leaflet-control {
      margin-right: 0;
      margin-left: 10px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full gradient-dark text-white overflow-auto"><!-- ==================== Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ==================== -->
  <div id="landing-view" class="h-full flex flex-col">
   <div class="absolute inset-0 opacity-10" style="background-image: url('data:image/svg+xml,%3Csvg width=&quot;60&quot; height=&quot;60&quot; viewBox=&quot;0 0 60 60&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;%3E%3Cg fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;%3E%3Cg fill=&quot;%2310b981&quot; fill-opacity=&quot;0.4&quot;%3E%3Cpath d=&quot;M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z&quot;/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
   <div class="relative flex-1 flex flex-col items-center justify-center p-6 text-center">
    <div class="mb-8 floating">
     <div class="w-24 h-24 mx-auto rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center glow-blue">
      <svg class="w-14 h-14 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
      </svg>
     </div>
    </div>
    <h1 id="main-title" class="text-3xl md:text-4xl font-bold mb-3 bg-gradient-to-r from-emerald-400 to-teal-300 bg-clip-text text-transparent">Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø°ÙƒÙŠ</h1>
    <p id="main-subtitle" class="text-slate-400 text-lg mb-2 max-w-sm">Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…ÙˆØµÙ„</p>
    <p class="text-slate-500 text-sm mb-8 max-w-xs">Ù†Ø¸Ø§Ù… Ù†Ù‚Ù„ Ø°ÙƒÙŠ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</p>
    <div class="mb-10 px-4 py-2 rounded-full bg-slate-800/50 border border-slate-700/50 text-sm text-slate-400"><span class="text-emerald-400">â—</span> ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
    </div>
    <div class="w-full max-w-sm space-y-4"><button onclick="showView('student')" class="w-full py-4 px-6 rounded-2xl btn-primary text-white font-semibold text-lg flex items-center justify-center gap-3">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
      </svg> Ø§Ù„Ø·Ø§Ù„Ø¨ </button> <button onclick="showView('bus-driver')" class="w-full py-4 px-6 rounded-2xl btn-secondary text-white font-semibold text-lg flex items-center justify-center gap-3">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h8m-8 4h8m-6 4h4M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"></path>
      </svg> Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø­Ø§ÙÙ„Ø© </button> <button onclick="showView('regular-driver')" class="w-full py-4 px-6 rounded-2xl btn-amber text-white font-semibold text-lg flex items-center justify-center gap-3">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
      </svg> Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ù…ÙˆØ¸Ù </button> <button onclick="showView('admin')" class="w-full py-3 px-6 rounded-xl bg-slate-800/50 border border-slate-700/50 text-slate-400 font-medium flex items-center justify-center gap-2 hover:bg-slate-700/50 transition-all">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
      </svg> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… </button> <button onclick="showView('leaderboard')" class="w-full py-3 px-6 rounded-xl bg-purple-600/30 border border-purple-500/50 text-purple-400 font-medium flex items-center justify-center gap-2 hover:bg-purple-600/40 transition-all">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
      </svg> Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ† </button>
    </div>
    <div class="mt-8 text-xs text-slate-600">
     Ø¹Ø±Ø¶ ØªÙˆØ¶ÙŠØ­ÙŠ â€¢ Ù…Ø³Ø§Ø¨Ù‚Ø© IEEE 2024
    </div>
   </div>
  </div><!-- ==================== Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ ==================== -->
  <div id="student-view" class="h-full flex flex-col view-hidden">
   <div class="flex-1 flex flex-col"><!-- Map -->
    <div id="student-map" class="flex-1 relative z-0"></div><!-- Header -->
    <div class="absolute top-0 left-0 right-0 z-10 p-4">
     <div class="flex items-center justify-between"><button onclick="showView('landing')" class="w-10 h-10 rounded-full bg-slate-800/80 backdrop-blur flex items-center justify-center">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
       </svg></button>
      <div class="px-4 py-2 rounded-full bg-slate-800/80 backdrop-blur text-sm flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-emerald-400 status-live"></span> <span class="text-emerald-400 font-medium">Ù…Ø¨Ø§Ø´Ø±</span>
      </div>
      <div class="w-10 h-10 rounded-full bg-slate-800/80 backdrop-blur flex items-center justify-center">
       <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
       </svg>
      </div>
     </div>
    </div><!-- Bottom Panel -->
    <div class="bottom-panel gradient-card border-t border-slate-700/50 flex flex-col gap-4 p-4"><!-- Status Card -->
     <div id="student-status-card" class="rounded-xl p-3 bg-slate-800/50 border border-slate-700/50">
      <p id="student-status-text" class="text-white font-medium text-sm">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ³Ø§Ø¦Ù„ Ù†Ù‚Ù„ Ù‚Ø±ÙŠØ¨Ø©...</p>
      <p id="student-status-sub" class="text-slate-400 text-xs mt-1">Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø·Ù„Ø¨</p>
     </div><!-- Nearby Transport Info -->
     <div class="grid grid-cols-3 gap-2">
      <div class="rounded-lg p-2 bg-slate-800/50 border border-slate-700/50 text-center">
       <p class="text-xs text-slate-400">Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª</p>
       <p id="nearby-buses" class="text-lg font-bold text-white">2</p>
      </div>
      <div class="rounded-lg p-2 bg-slate-800/50 border border-slate-700/50 text-center">
       <p class="text-xs text-slate-400">Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</p>
       <p id="nearby-cars" class="text-lg font-bold text-white">3</p>
      </div>
      <div class="rounded-lg p-2 bg-slate-800/50 border border-slate-700/50 text-center">
       <p class="text-xs text-slate-400">Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</p>
       <p id="eta-time" class="text-lg font-bold text-white">3Ø¯</p>
      </div>
     </div><!-- Request Button --> <button id="request-pickup-btn" onclick="requestPickup()" class="w-full py-3 rounded-xl btn-primary text-white font-bold text-sm flex items-center justify-center gap-2">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
      </svg> Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ </button>
    </div>
   </div>
  </div><!-- ==================== Ù„ÙˆØ­Ø© Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø­Ø§ÙÙ„Ø© ==================== -->
  <div id="bus-driver-view" class="h-full flex flex-col view-hidden">
   <div class="flex-1 flex flex-col"><!-- Map -->
    <div id="bus-map" class="flex-1 relative z-0"></div><!-- Header -->
    <div class="absolute top-0 right-0 left-0 z-10 p-4">
     <div class="flex items-center justify-between mb-2"><button onclick="showView('landing')" class="w-10 h-10 rounded-full bg-slate-800/80 backdrop-blur flex items-center justify-center">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
       </svg></button>
      <div class="px-3 py-2 rounded-full bg-blue-500/20 border border-blue-500/50 text-xs flex items-center gap-2"><span class="text-xl">ğŸšŒ</span> <span class="text-blue-400 font-medium">ÙˆØ¶Ø¹ Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø­Ø§ÙÙ„Ø©</span>
      </div>
      <div class="w-10 h-10 rounded-full bg-slate-800/80 backdrop-blur flex items-center justify-center"><span class="w-2 h-2 rounded-full bg-emerald-400 status-live"></span>
      </div>
     </div><!-- Alert Banner -->
     <div id="bus-alert" class="bg-gradient-to-r from-red-500/20 to-orange-500/20 border border-red-500/50 rounded-lg p-2 backdrop-blur">
      <p class="text-white font-medium text-xs">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ø°ÙƒÙŠ: Ø·Ù„Ø¨ Ø¹Ø§Ù„ÙŠ!</p>
      <p class="text-slate-300 text-xs">~15 Ø·Ø§Ù„Ø¨ Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ Ø®Ù„Ø§Ù„ 10 Ø¯Ù‚Ø§Ø¦Ù‚</p>
     </div>
    </div><!-- Bottom Panel -->
    <div class="bottom-panel gradient-card border-t border-slate-700/50 flex flex-col gap-3 p-4"><!-- Stats Card -->
     <div class="rounded-lg p-3 bg-slate-800/50 border border-slate-700/50">
      <div class="grid grid-cols-3 gap-2 mb-2">
       <div class="text-center">
        <p id="bus-students" class="text-xl font-bold text-white">12</p>
        <p class="text-slate-500 text-xs">Ø§Ù„Ø·Ù„Ø§Ø¨</p>
       </div>
       <div class="text-center">
        <p id="bus-stops" class="text-xl font-bold text-blue-400">4</p>
        <p class="text-slate-500 text-xs">Ø§Ù„Ù…Ø­Ø·Ø§Øª</p>
       </div>
       <div class="text-center">
        <p id="bus-eta" class="text-xl font-bold text-emerald-400">18Ø¯</p>
        <p class="text-slate-500 text-xs">Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</p>
       </div>
      </div>
      <div class="bg-slate-700/50 rounded-lg p-2 text-xs">
       <p class="text-slate-400 mb-1">ğŸ“ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­</p>
       <p class="text-white font-medium">Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© â†’ Ø§Ù„Ø¹Ù„ÙˆÙ… â†’ Ø§Ù„Ù…ÙƒØªØ¨Ø© â†’ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>
      </div>
     </div>
    </div>
   </div>
  </div><!-- ==================== Ù„ÙˆØ­Ø© Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ù…ÙˆØ¸Ù ==================== -->
  <div id="regular-driver-view" class="h-full flex flex-col view-hidden">
   <div class="flex-1 flex flex-col p-4 overflow-auto"><!-- Header -->
    <div class="flex items-center justify-between mb-4"><button onclick="showView('landing')" class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg></button>
     <h1 class="text-base font-semibold">Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ù…ÙˆØ¸Ù</h1>
     <div class="w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center"><span class="text-lg">ğŸš—</span>
     </div>
    </div><!-- Driver Info Card -->
    <div id="driver-info-card" class="gradient-card rounded-xl p-4 border border-slate-700/50 mb-4">
     <div class="flex items-center justify-between mb-3">
      <div>
       <p class="text-slate-400 text-xs">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³Ø§Ø¦Ù‚</p>
       <p id="driver-name" class="text-lg font-bold text-white">Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ</p>
      </div>
      <div class="w-12 h-12 rounded-full bg-amber-500/20 flex items-center justify-center"><span class="text-2xl">ğŸ‘¤</span>
      </div>
     </div>
     <div class="flex justify-between text-center">
      <div>
       <p id="driver-points" class="text-xl font-bold text-amber-400">120</p>
       <p class="text-slate-500 text-xs">Ø§Ù„Ù†Ù‚Ø§Ø·</p>
      </div>
      <div>
       <p id="driver-rides" class="text-xl font-bold text-blue-400">8</p>
       <p class="text-slate-500 text-xs">Ø§Ù„Ø±Ø­Ù„Ø§Øª</p>
      </div>
      <div>
       <p id="driver-daily-limit" class="text-xl font-bold text-emerald-400">1</p>
       <p class="text-slate-500 text-xs">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø§Ù„ÙŠÙˆÙ…</p>
      </div>
     </div>
    </div><!-- Nearby Students Card -->
    <div id="driver-students-card" class="gradient-card rounded-xl p-4 border border-slate-700/50 mb-4">
     <p class="text-slate-400 text-xs mb-2">Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù‚Ø±ÙŠØ¨ÙˆÙ†</p>
     <div class="flex justify-between items-end">
      <div>
       <p id="driver-student-count" class="text-3xl font-bold text-white">2</p>
      </div>
      <div class="text-right">
       <p class="text-slate-400 text-xs">Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</p>
       <p id="driver-distance" class="text-lg font-bold text-amber-400">â‰ˆ 300 Ù…</p>
      </div>
     </div>
    </div><!-- Accept Button --> <button id="accept-pickup-btn" onclick="acceptPickup()" class="w-full py-3 rounded-xl btn-amber text-white font-bold text-sm flex items-center justify-center gap-2 mb-4">
     <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
     </svg> Ù‚Ø¨ÙˆÙ„ ØªÙˆØµÙŠÙ„ (1 ÙÙŠ Ø§Ù„ÙŠÙˆÙ…) </button> <!-- Bonus Card -->
    <div id="bonus-card" class="view-hidden gradient-card rounded-xl p-4 border border-emerald-500/50 bg-emerald-500/10">
     <div class="flex items-center gap-3"><span class="text-3xl">ğŸ‰</span>
      <div>
       <p class="text-emerald-400 font-bold">ØªÙ… ÙƒØ³Ø¨ Ù…ÙƒØ§ÙØ£Ø©!</p>
       <p class="text-slate-400 text-xs">+50 Ù†Ù‚Ø·Ø© ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡Ø§</p>
      </div>
     </div>
    </div>
   </div>
  </div><!-- ==================== Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ==================== -->
  <div id="admin-view" class="h-full flex flex-col view-hidden">
   <div class="flex-1 flex flex-col p-4 overflow-auto"><!-- Header -->
    <div class="flex items-center justify-between mb-4"><button onclick="showView('landing')" class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg></button>
     <h1 class="text-base font-semibold">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
     <div class="w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center">
      <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
      </svg>
     </div>
    </div><!-- Tabs -->
    <div class="flex gap-2 mb-4"><button onclick="switchAdminTab('rewards')" id="tab-rewards" class="flex-1 py-2 rounded-lg bg-slate-800/50 border border-slate-700/50 text-sm font-medium text-slate-400">Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</button> <button onclick="switchAdminTab('drivers')" id="tab-drivers" class="flex-1 py-2 rounded-lg bg-slate-800/50 border border-slate-700/50 text-sm font-medium text-slate-400">Ø§Ù„Ø³Ø§Ø¦Ù‚ÙˆÙ†</button> <button onclick="switchAdminTab('schedule')" id="tab-schedule" class="flex-1 py-2 rounded-lg bg-slate-800/50 border border-slate-700/50 text-sm font-medium text-slate-400">Ø§Ù„Ø¬Ø¯ÙˆÙ„</button>
    </div><!-- Rewards Tab -->
    <div id="rewards-tab" class="view-hidden">
     <h2 class="text-white font-semibold mb-3 flex items-center gap-2"><span>ğŸ†</span> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</h2>
     <div id="drivers-list" class="space-y-3 mb-4"><!-- Drivers will be populated here -->
     </div>
    </div><!-- Drivers Tab -->
    <div id="drivers-tab" class="view-hidden">
     <h2 class="text-white font-semibold mb-3 flex items-center gap-2"><span>ğŸ‘¥</span> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†</h2>
     <div id="all-drivers-list" class="space-y-3"><!-- Drivers will be populated here -->
     </div>
    </div><!-- Schedule Tab -->
    <div id="schedule-tab" class="view-hidden">
     <h2 class="text-white font-semibold mb-3 flex items-center gap-2"><span>ğŸ“…</span> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„</h2>
     <form id="admin-form" onsubmit="saveSchedule(event)" class="space-y-3">
      <div><label class="block text-slate-400 text-xs mb-1">Ø§Ù„ÙŠÙˆÙ…</label> <select id="schedule-day" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-emerald-500"> <option value="sunday">Ø§Ù„Ø£Ø­Ø¯</option> <option value="monday">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option> <option value="tuesday">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option> <option value="wednesday">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option> <option value="thursday">Ø§Ù„Ø®Ù…ÙŠØ³</option> </select>
      </div>
      <div><label class="block text-slate-400 text-xs mb-1">Ù†Ø·Ø§Ù‚ Ø§Ù„ÙˆÙ‚Øª</label> <select id="time-range" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-emerald-500"> <option value="morning">Ø§Ù„ØµØ¨Ø§Ø­ (7:00 - 10:00)</option> <option value="midday">Ø§Ù„Ø¸Ù‡ÙŠØ±Ø© (10:00 - 14:00)</option> <option value="afternoon">Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (14:00 - 18:00)</option> <option value="evening">Ø§Ù„Ù…Ø³Ø§Ø¡ (18:00 - 21:00)</option> </select>
      </div><button type="submit" class="w-full py-2 rounded-lg bg-purple-500 hover:bg-purple-600 text-white font-medium text-sm transition-colors"> Ø­ÙØ¸ Ø§Ù„Ø¬Ø¯ÙˆÙ„ </button>
     </form>
    </div>
   </div>
  </div><!-- ==================== Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ† ==================== -->
  <div id="leaderboard-view" class="h-full flex flex-col view-hidden">
   <div class="flex-1 flex flex-col p-4 overflow-auto"><!-- Header -->
    <div class="flex items-center justify-between mb-4"><button onclick="showView('landing')" class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg></button>
     <h1 class="text-base font-semibold">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</h1>
     <div class="w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center"><span class="text-lg">ğŸ…</span>
     </div>
    </div><!-- Trophy Icon -->
    <div class="text-center mb-4">
     <p class="text-2xl">ğŸ†</p>
     <p class="text-slate-500 text-xs mt-1">Ø£ÙØ¶Ù„ Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† ÙÙŠ Ø§Ù„Ø­Ø±Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ</p>
    </div><!-- Leaderboard List -->
    <div id="leaderboard-list" class="space-y-3"><!-- Will be populated by JavaScript -->
    </div>
   </div>
  </div>
  <script>
    // ==================== CONFIGURATION ====================
    const defaultConfig = {
      app_title: 'Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø°ÙƒÙŠ',
      subtitle: 'Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…ÙˆØµÙ„'
    };
    
    let config = { ...defaultConfig };
    
    // University of Mosul coordinates
    const MOSUL_CENTER = [36.3417, 43.1195];
    
    // Map instances
    let studentMap = null;
    let busMap = null;
    
    // Marker references
    let studentMarker = null;
    let driverMarkers = [];
    let studentMarkersOnBusMap = [];
    let busMarker = null;
    
    // Simulation state
    let simulationIntervals = [];
    let pickupRequested = false;
    let pickupAccepted = false;
    
    // Driver data
    const driversData = [
      { id: 1, name: 'Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ', points: 120, rides: 8, phone: '07701234567' },
      { id: 2, name: 'Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†', points: 95, rides: 6, phone: '07702345678' },
      { id: 3, name: 'Ø¹Ù„ÙŠ Ù…Ø­Ù…ÙˆØ¯', points: 85, rides: 5, phone: '07703456789' },
      { id: 4, name: 'Ø³Ø§Ø±Ø© Ø®Ø§Ù„Ø¯', points: 110, rides: 7, phone: '07704567890' },
      { id: 5, name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù…Ø±', points: 75, rides: 4, phone: '07705678901' }
    ];
    
    // ==================== VIEW MANAGEMENT ====================
    function showView(viewName) {
      document.querySelectorAll('[id$="-view"]').forEach(view => {
        view.classList.add('view-hidden');
      });
      
      const targetView = document.getElementById(`${viewName}-view`);
      if (targetView) {
        targetView.classList.remove('view-hidden');
      }
      
      simulationIntervals.forEach(interval => clearInterval(interval));
      simulationIntervals = [];
      
      setTimeout(() => {
        switch(viewName) {
          case 'student':
            initStudentMap();
            startStudentSimulation();
            break;
          case 'bus-driver':
            initBusMap();
            startBusSimulation();
            break;
          case 'regular-driver':
            startDriverSimulation();
            break;
          case 'admin':
            initAdminPanel();
            break;
          case 'leaderboard':
            initLeaderboard();
            break;
        }
      }, 100);
    }
    
    function switchAdminTab(tab) {
      // Hide all tabs
      document.getElementById('rewards-tab').classList.add('view-hidden');
      document.getElementById('drivers-tab').classList.add('view-hidden');
      document.getElementById('schedule-tab').classList.add('view-hidden');
      
      // Reset button styles
      document.getElementById('tab-rewards').classList.remove('bg-emerald-500/20', 'border-emerald-500', 'text-emerald-400');
      document.getElementById('tab-drivers').classList.remove('bg-emerald-500/20', 'border-emerald-500', 'text-emerald-400');
      document.getElementById('tab-schedule').classList.remove('bg-emerald-500/20', 'border-emerald-500', 'text-emerald-400');
      document.getElementById('tab-rewards').classList.add('bg-slate-800/50', 'border-slate-700/50', 'text-slate-400');
      document.getElementById('tab-drivers').classList.add('bg-slate-800/50', 'border-slate-700/50', 'text-slate-400');
      document.getElementById('tab-schedule').classList.add('bg-slate-800/50', 'border-slate-700/50', 'text-slate-400');
      
      // Show selected tab and highlight button
      document.getElementById(`${tab}-tab`).classList.remove('view-hidden');
      document.getElementById(`tab-${tab}`).classList.remove('bg-slate-800/50', 'border-slate-700/50', 'text-slate-400');
      document.getElementById(`tab-${tab}`).classList.add('bg-emerald-500/20', 'border-emerald-500', 'text-emerald-400');
    }
    
    // ==================== MAP INITIALIZATION ====================
    
    function createCustomIcon(type, size = 40) {
      const colors = {
        student: { bg: '#3b82f6', emoji: 'ğŸ‘¤' },
        bus: { bg: '#10b981', emoji: 'ğŸšŒ' },
        car: { bg: '#f59e0b', emoji: 'ğŸš—' },
        you: { bg: '#ef4444', emoji: 'ğŸ“' }
      };
      
      const c = colors[type] || colors.student;
      
      return L.divIcon({
        html: `
          <div style="
            width: ${size}px;
            height: ${size}px;
            background: ${c.bg};
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: ${size * 0.5}px;
          ">${c.emoji}</div>
        `,
        className: 'custom-marker-icon',
        iconSize: [size, size],
        iconAnchor: [size/2, size/2]
      });
    }
    
    function initStudentMap() {
      if (studentMap) {
        studentMap.remove();
      }
      
      const mapContainer = document.getElementById('student-map');
      if (!mapContainer) return;
      
      studentMap = L.map('student-map', {
        zoomControl: false
      }).setView(MOSUL_CENTER, 16);
      
      L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: 'Â© OpenStreetMap',
        maxZoom: 19
      }).addTo(studentMap);
      
      const studentPos = getRandomPosition(MOSUL_CENTER, 0.002);
      studentMarker = L.marker(studentPos, {
        icon: createCustomIcon('you', 44)
      }).addTo(studentMap);
      
      L.circle(studentPos, {
        radius: 30,
        color: '#ef4444',
        fillColor: '#ef4444',
        fillOpacity: 0.2,
        weight: 2
      }).addTo(studentMap);
      
      addNearbyDrivers(studentMap, studentPos);
    }
    
    function addNearbyDrivers(map, centerPos) {
      driverMarkers = [];
      
      for (let i = 0; i < 2; i++) {
        const pos = getRandomPosition(centerPos, 0.005);
        const marker = L.marker(pos, {
          icon: createCustomIcon('bus', 38)
        }).addTo(map);
        driverMarkers.push({ marker, type: 'bus', basePos: pos });
      }
      
      for (let i = 0; i < 3; i++) {
        const pos = getRandomPosition(centerPos, 0.006);
        const marker = L.marker(pos, {
          icon: createCustomIcon('car', 34)
        }).addTo(map);
        driverMarkers.push({ marker, type: 'car', basePos: pos });
      }
    }
    
    function initBusMap() {
      if (busMap) {
        busMap.remove();
      }
      
      const mapContainer = document.getElementById('bus-map');
      if (!mapContainer) return;
      
      busMap = L.map('bus-map', {
        zoomControl: false
      }).setView(MOSUL_CENTER, 15);
      
      L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: 'Â© OpenStreetMap',
        maxZoom: 19
      }).addTo(busMap);
      
      busMarker = L.marker(MOSUL_CENTER, {
        icon: createCustomIcon('bus', 48)
      }).addTo(busMap);
      
      addStudentMarkers(busMap);
    }
    
    function addStudentMarkers(map) {
      studentMarkersOnBusMap = [];
      
      for (let i = 0; i < 8; i++) {
        const pos = getRandomPosition(MOSUL_CENTER, 0.008);
        const marker = L.marker(pos, {
          icon: createCustomIcon('student', 28)
        }).addTo(map);
        studentMarkersOnBusMap.push({ marker, basePos: pos });
      }
    }
    
    // ==================== SIMULATION FUNCTIONS ====================
    
    function getRandomPosition(center, range) {
      return [
        center[0] + (Math.random() - 0.5) * range,
        center[1] + (Math.random() - 0.5) * range
      ];
    }
    
    function startStudentSimulation() {
      const moveInterval = setInterval(() => {
        driverMarkers.forEach(driver => {
          const newPos = getRandomPosition(driver.basePos, 0.001);
          driver.marker.setLatLng(newPos);
        });
      }, 3000);
      simulationIntervals.push(moveInterval);
      
      const statusMessages = [
        { text: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ³Ø§Ø¦Ù„ Ù†Ù‚Ù„ Ù‚Ø±ÙŠØ¨Ø©...', sub: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø·Ù„Ø¨' },
        { text: '2 Ø­Ø§ÙÙ„Ø© ØªÙ‚ØªØ±Ø¨ Ù…Ù† Ù…Ù†Ø·Ù‚ØªÙƒ', sub: 'Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©: 3-5 Ø¯Ù‚Ø§Ø¦Ù‚' },
        { text: 'ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ø·Ù„Ø¨ Ø¹Ø§Ù„ÙŠ Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù† Ù…ÙˆÙ‚Ø¹Ùƒ', sub: 'ÙŠÙÙ†ØµØ­ Ø¨Ø±Ø­Ù„Ø© Ù…Ø´ØªØ±ÙƒØ© Ù„Ù„ØªÙˆØµÙŠÙ„ Ø¨Ø³Ø±Ø¹Ø© Ø£ÙƒØ¨Ø±' }
      ];
      
      let statusIndex = 0;
      const statusInterval = setInterval(() => {
        if (!pickupRequested) {
          statusIndex = (statusIndex + 1) % statusMessages.length;
          document.getElementById('student-status-text').textContent = statusMessages[statusIndex].text;
          document.getElementById('student-status-sub').textContent = statusMessages[statusIndex].sub;
        }
      }, 5000);
      simulationIntervals.push(statusInterval);
      
      const etaInterval = setInterval(() => {
        const eta = Math.floor(Math.random() * 5) + 2;
        document.getElementById('eta-time').textContent = eta + 'Ø¯';
      }, 8000);
      simulationIntervals.push(etaInterval);
    }
    
    function startBusSimulation() {
      let routeIndex = 0;
      const routePoints = [
        [36.3417, 43.1195],
        [36.3430, 43.1200],
        [36.3440, 43.1180],
        [36.3420, 43.1160],
        [36.3400, 43.1170],
        [36.3410, 43.1190]
      ];
      
      const busInterval = setInterval(() => {
        routeIndex = (routeIndex + 1) % routePoints.length;
        if (busMarker) {
          busMarker.setLatLng(routePoints[routeIndex]);
        }
        
        const students = Math.floor(Math.random() * 8) + 8;
        const stops = Math.floor(Math.random() * 3) + 2;
        const eta = (stops * 5) + Math.floor(Math.random() * 5);
        
        document.getElementById('bus-students').textContent = students;
        document.getElementById('bus-stops').textContent = stops;
        document.getElementById('bus-eta').textContent = eta + 'Ø¯';
      }, 4000);
      simulationIntervals.push(busInterval);
      
      const studentMoveInterval = setInterval(() => {
        studentMarkersOnBusMap.forEach(student => {
          const newPos = getRandomPosition(student.basePos, 0.0005);
          student.marker.setLatLng(newPos);
        });
      }, 5000);
      simulationIntervals.push(studentMoveInterval);
    }
    
    function startDriverSimulation() {
      const countInterval = setInterval(() => {
        if (!pickupAccepted) {
          const count = Math.floor(Math.random() * 3) + 1;
          const distance = (Math.floor(Math.random() * 4) + 2) * 100;
          document.getElementById('driver-student-count').textContent = count;
          document.getElementById('driver-distance').textContent = `â‰ˆ ${distance} Ù…`;
        }
      }, 6000);
      simulationIntervals.push(countInterval);
    }
    
    // ==================== ADMIN PANEL ====================
    
    function initAdminPanel() {
      switchAdminTab('rewards');
      populateRewardsList();
      populateDriversList();
    }
    
    function populateRewardsList() {
      const list = document.getElementById('drivers-list');
      list.innerHTML = '';
      
      const sortedDrivers = [...driversData].sort((a, b) => b.points - a.points);
      
      sortedDrivers.forEach((driver, index) => {
        const rewards = ['ÙƒØªØ§Ø¨ Ø´ÙƒØ±', 'Ø´Ù‡Ø§Ø¯Ø© Ø¹Ù…Ù„ ØªØ·ÙˆØ¹ÙŠ', 'Ù…ÙƒØ§ÙØ£Ø© Ù…Ø§Ù„ÙŠØ©'];
        const card = document.createElement('div');
        card.className = 'gradient-card rounded-lg p-3 border border-slate-700/50';
        card.innerHTML = `
          <div class="flex items-center justify-between mb-3">
            <div>
              <p class="text-white font-medium text-sm">${driver.name}</p>
              <p class="text-slate-400 text-xs">Ø§Ù„Ù†Ù‚Ø§Ø·: ${driver.points}</p>
            </div>
            <span class="text-2xl">${index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : 'â­'}</span>
          </div>
          <div class="flex gap-2">
            ${rewards.map(reward => `
              <button onclick="giveReward('${driver.name}', '${reward}')" class="flex-1 py-2 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-400 text-xs font-medium hover:bg-emerald-500/30 transition-colors">
                ${reward}
              </button>
            `).join('')}
          </div>
        `;
        list.appendChild(card);
      });
    }
    
    function populateDriversList() {
      const list = document.getElementById('all-drivers-list');
      list.innerHTML = '';
      
      const sortedDrivers = [...driversData].sort((a, b) => b.points - a.points);
      
      sortedDrivers.forEach((driver, index) => {
        const card = document.createElement('div');
        card.className = 'gradient-card rounded-lg p-3 border border-slate-700/50';
        card.innerHTML = `
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 rounded-full bg-slate-700/50 flex items-center justify-center text-lg flex-shrink-0">
              ${index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : 'â­'}
            </div>
            <div class="flex-1">
              <p class="text-white font-medium text-sm">${driver.name}</p>
              <p class="text-slate-500 text-xs">${driver.phone}</p>
            </div>
            <div class="text-right">
              <p class="text-amber-400 font-bold text-lg">${driver.points}</p>
              <p class="text-slate-500 text-xs">${driver.rides} Ø±Ø­Ù„Ø©</p>
            </div>
          </div>
        `;
        list.appendChild(card);
      });
    }
    
    function giveReward(driverName, reward) {
      alert(`ØªÙ… Ù…Ù†Ø­ "${driverName}" ${reward}`);
    }
    
    function saveSchedule(event) {
      event.preventDefault();
      alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!');
    }
    
    // ==================== LEADERBOARD ====================
    
    function initLeaderboard() {
      const leaderboardList = document.getElementById('leaderboard-list');
      leaderboardList.innerHTML = '';
      
      const sortedDrivers = [...driversData].sort((a, b) => b.points - a.points);
      
      sortedDrivers.forEach((driver, index) => {
        const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
        const medal = medals[index] || 'â­';
        
        const card = document.createElement('div');
        card.className = 'gradient-card rounded-lg p-4 border border-slate-700/50 flex items-center gap-4';
        card.innerHTML = `
          <div class="text-3xl">${medal}</div>
          <div class="flex-1">
            <p class="text-white font-bold">${driver.name}</p>
            <p class="text-slate-400 text-xs mt-1">${driver.rides} Ø±Ø­Ù„Ø©</p>
          </div>
          <div class="text-right">
            <p class="text-amber-400 font-bold text-2xl">${driver.points}</p>
            <p class="text-slate-500 text-xs">Ù†Ù‚Ø·Ø©</p>
          </div>
        `;
        leaderboardList.appendChild(card);
      });
    }
    
    // ==================== USER ACTIONS ====================
    
    function requestPickup() {
      pickupRequested = true;
      const btn = document.getElementById('request-pickup-btn');
      const statusText = document.getElementById('student-status-text');
      const statusSub = document.getElementById('student-status-sub');
      
      btn.innerHTML = `
        <svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
        Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...
      `;
      btn.disabled = true;
      btn.classList.add('opacity-70');
      
      statusText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ³Ø§Ø¦Ù„ Ù†Ù‚Ù„ Ù‚Ø±ÙŠØ¨Ø©...';
      statusSub.textContent = 'Ø¬Ø§Ø±ÙŠ Ù…Ø·Ø§Ø¨Ù‚Ø© Ø£ÙØ¶Ù„ Ø±Ø­Ù„Ø© Ù„Ùƒ';
      
      setTimeout(() => {
        statusText.textContent = 'ğŸšŒ ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø§ÙÙ„Ø© Ø±Ù‚Ù… 7 Ù„Ùƒ!';
        statusSub.textContent = 'Ø³ØªØµÙ„ Ø®Ù„Ø§Ù„ Ø­ÙˆØ§Ù„ÙŠ 3 Ø¯Ù‚Ø§Ø¦Ù‚';
        
        btn.innerHTML = `
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
          ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±Ø­Ù„Ø©
        `;
        btn.classList.remove('btn-primary');
        btn.classList.add('bg-emerald-600');
      }, 3000);
    }
    
    function acceptPickup() {
      pickupAccepted = true;
      const btn = document.getElementById('accept-pickup-btn');
      const studentsCard = document.getElementById('driver-students-card');
      const bonusCard = document.getElementById('bonus-card');
      const dailyLimit = document.getElementById('driver-daily-limit');
      
      btn.innerHTML = `
        <svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
        Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...
      `;
      
      setTimeout(() => {
        studentsCard.classList.add('view-hidden');
        bonusCard.classList.remove('view-hidden');
        btn.classList.add('view-hidden');
        dailyLimit.textContent = '0';
        
        // Update driver points
        document.getElementById('driver-points').textContent = '170';
      }, 2000);
    }
    
    // ==================== ELEMENT SDK ====================
    
    async function onConfigChange(newConfig) {
      config = { ...config, ...newConfig };
      
      const titleEl = document.getElementById('main-title');
      if (titleEl) {
        titleEl.textContent = config.app_title || defaultConfig.app_title;
      }
      
      const subtitleEl = document.getElementById('main-subtitle');
      if (subtitleEl) {
        subtitleEl.textContent = config.subtitle || defaultConfig.subtitle;
      }
    }
    
    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }
    
    function mapToEditPanelValues(config) {
      return new Map([
        ['app_title', config.app_title || defaultConfig.app_title],
        ['subtitle', config.subtitle || defaultConfig.subtitle]
      ]);
    }
    
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
    
    onConfigChange(config);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cad7872c0d92e42',t:'MTc3MDU3ODI4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>